<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% load static %}
  <link rel="stylesheet" type="text/css" href="{% static 'main.css'%}">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <title>Infox core</title>
      <script type="text/javascript">
    function setselected(id) {
        $('input[name="selected"]').val(id);
    }
</script>
<style>

#box2{
  padding: 1% 5% 1% 5%;
  background-color: white;
  border-radius: 20px;
  float: left;
  margin-top: 2%;

  margin-right: 3%;
    width: 100%;
}
#box2 h5,#box2 img{
  float: left;
  margin-right: 20px;
}
h5{
  font-weight: 400;
  margin-top: 10px;
  width:150px;

}
h5 span{
  font-weight: 400;
  margin-top: 10px;
  color: #15A7A7;

}
#hiddendiv{
  height: auto;
  width: 75%;
  float: right;

}
#box2 img{
  margin-top: 15px;
}

#bigimage{
  float: right;
  margin-right: 10%;
}
h5{
  font-size: 16px;
}
.progress{
  width: 180px;
}

button{
  margin-top: 4%;
  float: right;
  margin-left: 6%;
  padding-left: 3%;
  padding-right: 3%;
  width: 90px;
  background-color: #6C63FF;
  color: white;

}
.Search{
  margin-top: 2%;

  margin-bottom: 1%;


  width: 120px;
  background-color: #6C63FF;
  color: white;

}



  </style>
      </head>
<body>
<div  id="nav" class="container-fluid">
        <a class="one" id="infox"><b>iNFOX</b></a>
        <a class="two" id="core"><b>Core</b></a>
        <a class="three" id=""></a>
          {% for t in mem %}
    {% if forloop.first %}{% endif %}
        <span class="four">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="{{ t.employeeimage.url }}" class="rounded-circle"  width="50" height="50" id="img2"></span>
{% endfor %}
</div>
<div class="sidenav">
  <a href="tl" class="col" id="sidebox1">MY PROFILE</a>
  <a href="tltasks" class="col" id="sidebox1">TRAINEES</a>
  <a href="tlprojects" class="col" id="sidebox1">TASKS</a>
  <a href="tlperformance" class="col" id="sidebox1">PROJECTS</a>
  <a href="tlemployeess" class="col" id="sidebox1">ATTENDANCE</a>
  <a href="tlreportissues" class="col" id="sidebox1">REPORTED ISSUES</a>
  <a href="tlPayments1" class="col" id="sidebox1">PAYMENTS</a>
  <a href="tlattendance2" class="col" id="sidebox1">APPLY LEAVE</a>
</div>
<div><label id="myprofile">Project Tasks</label>

<div id="hiddendiv">


  <div id="box2" class="shadow bg-white">
 <table class="table table-bordered" style="border-color: #1CB1BD;margin-top: 2%">
    <thead>
      <tr style="background-color:  #a5becf">
        <th style="column-width: 230px">Task name</th>
        <th style="width: 240px">AssignedTo</th>
        <th>Task status</th>
        <th>Test status</th>
          <th>Extension</th>
           <th>Split Task</th>
        <th style="width: 200px">Project Details</th>
      </tr>
    </thead>
    <tbody>
    {% for x in emp %}

      <tr>
        <td style="width: 240px">{{ x.taskname }}</td>
        <td style="width: 250px"> {{ x.assignedto.name }}</td>
          <td style="width: 180px"><a  style="width: 300px;font-size: 17px"href="" data-toggle="modal" data-target="#myModal4{{ x.id }}" onclick="setselected({{ x.id }})">Task status</a></td>
        <td style="width: 180px"><a  style="width: 300px;font-size: 17px"href="" data-toggle="modal" data-target="#myModal3{{ x.id }}">Tester status</a></td>
      <td style="width: 180px"><a  style="width: 300px;font-size: 17px"href="" data-toggle="modal" data-target="#myModal2{{ x.id }}">Extension status</a></td>
          <td style="width: 180px"><a  style="width: 300px;font-size: 17px"href="TLProjectTaskSubtask?tid={{ x.id }}" >Split status</a></td>
        <td style="width: 200px"><div class="progress" data-toggle="modal" data-target="#myModal1{{ x.id }}" style="height:20px;background-color: #C2F0EB">
    <div class="progress-bar" style="width:{{ x.progress }}%;height:24px;font-size: 16px">{{ x.progress }}%</div>
  </div><br></td>
</tr>
{% endfor %}
    </tbody>
  </table>
  <!--================================================mymodal 4====================-->

{% for key, value in rep.items %}
 <div class="modal fade" id="myModal4{{ key }}">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <div class="col">  <h3 style="font-size: 24px;color: #53d4af">Sub task</h3>
    </div>

         <button type="button" class="close" data-dismiss="modal" style="height: 2px;margin-right: -11px">&times;</button>
        </div>
        <div class="modal-body"style=" height: 80vh;
    overflow-y: auto;" >

   <!-- <div class="col">
      <hr style="height:0.5px;border-width:0;color:gray;background-color:gray;width: 100%;margin-left: 0%;margin-top: 0%">
   </div>-->


          <table class="table table-bordered" style="border-color: #1CB1BD">
    <thead>
      <tr style="background-color:  #a5becf">
        <th>Date</th>
        <th style="width: 310px">Work done</th>
        <th>Files</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
    {% for x in value %}
    <tr>
        <td>{{ x.date}}</td>
        <td style="width: 310px">{{ x.workdone}}</td>

    <td>  {% for ss in x.json_attachfile %}
            <a href="{{ss}}" style="font-size: 15px">Download</a>
            {% endfor %}
        </td>
      </tr>
{% endfor %}
    <form action="TLprojectsubtasksAddReport" method="post" enctype="multipart/form-data">
 {% csrf_token %}
      <input type="hidden" name="selected" id="selected" value="">
        {% for i in emp %}
             <input type="hidden" name="taskid" value="{{ i.id }}">
             <input type="hidden" name="assignedto" value="{{ i.assignedby.id }}">
            <input type="hidden" name=" assignedby" value="{{ i.assignedto.id }}">
            <input type="hidden" name="projectid" value="{{ i.project.id }}">
            <input type="hidden" name="duedate" value="{{ i.duedate }}">
            <input type="hidden" name="testerid" value="{{ i.testerid.id }}">



        {% endfor %}
      <tr>
        <!--<td style="width: 200px"> <input type="date" name="wdate"></td>-->
        
        <td><h5 name="wdate">{% now 'd-M-Y' %}</h5></td>
        
        <td style="width: 300px"><textarea  rows="5" cols="33" name="work"></textarea></td>
        <td style="width: 100px"><input style="padding-left: 0px;margin-top: 0px;width: 200px" required name="taskattachfile" type="file" multiple accept="file/*" class="form-control-file">
<br><br></td>
        <td style="width: 200px"><button type="submit">Save</button> </td>
      </tr>
    </form>
     <!-- <tr>
        <td>12/02/2019</td>
        <td style="width: 310px">Jobkit front end started</td>
        <td><button type="button">Upload</button> </td>
        <td><button type="button">Save</button> </td>
      </tr>-->
            </tbody>
      </table>
        </div>

        <!-- Modal footer
       <button type="button" class="btn Search" style="margin-left: 640px">Ok</button>-->

      </div>
    </div>
  </div>
{% endfor %}


  <!--============================================================================-->

  <!-----------------mymodal 3----------------->
  {% for key, value in testm.items %}
    <div class="modal fade" id="myModal3{{ key }}">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <div class="col">  <h3 style="font-size: 24px;color: #53d4af">Tester Report</h3>
    </div>

         <button type="button" class="close" data-dismiss="modal" style="height: 2px;margin-right: -11px; ">&times;</button>
        </div>
        <div class="modal-body" style=" height: 80vh;
    overflow-y: auto;">

    <!--<div class="col">
      <hr style="height:0.5px;border-width:0;color:gray;background-color:gray;width: 100%;margin-left: 0%;margin-top: 0%">
   </div>-->



          <table class="table table-bordered" style="border-color: #1CB1BD">

    <thead>
      <tr style="background-color:  #a5becf">
        <th style="width: 160px">Date</th>

        <th style="width: 230px">Task</th>

          <th style="width: 280px">Description</th>
          <th style="width: 150px">Status</th>
            <th style="width: 100px">Delay</th>
          <th style="width: 250px">Files</th>
           <th style="width: 160px">TestBy</th>
      </tr>
    </thead>
    <tbody>
    {% for f in value %}
      <tr>
        <td style="width: 160px">{{ f.date }}</td>

          <td style="width: 230px">{{ f.reportid.task.taskname }}</td>

          <td style="width: 280px">{{ f.testerdescri}}</td>
          <td style="width:150px">{{ f.testerstatus }}</td>
          <td style="width: 100px">{{ f.date_diff }}</td>
          <td style="width: 250px">
       {% for ss in f.json_attachfile %}
            <a href="{{ss}}" style="font-size: medium">Download</a>
            {% endfor %}</td>
      <td style="width: 160px">{{ f.testerid.name }}</td>
      </tr>
    {% endfor %}
        </tbody>
      </table>
        </div>
        <!-- Modal footer
       <button type="button" class="btn Search" style="margin-left: 640px">Ok</button>-->

      </div>
    </div>
  </div>
{% endfor %}
   <!-----------------mymodal 2----------------->
   {% for key, value in extension.items %}
    <div class="modal fade" id="myModal2{{ key }}" style="height: 600px;margin-left: 30px">
    <div class="modal-dialog modal-lg" >
      <div class="modal-content">
        <div class="modal-header">
          <div class="col">  <h3 style="font-size: 24px;color: #53d4af">Extension Request</h3>
    </div>

         <button type="button" class="close" data-dismiss="modal" style="height: 2px;margin-right: -11px; ">&times;</button>
        </div>
        <div class="modal-body" style=" height: 80vh;
    overflow-y: auto;">
<form method="POST" action="TLprojectsubtaskextensionrqst">
 {% csrf_token %}
       {% for dt in value %}
            <input type="hidden" id="leavId" name="team_id" value={{ dt.id }}><br>
   <div class="row">
     <div class="col"><h5 style=";width: 140px;margin-left: 15px;margin-top: 8px">Requested Days</h5></div>
    <div class="col"><input type="text" name="days" style="width: 120px;margin-left: -150px;margin-top: 8px"></div>
     </div><br><br>
           <br>
    <div class="row">
     <div class="col"><h5 style=";width: 140px;margin-left: 15px;margin-top: 8px">Reason</h5></div>
    <div class="col"><textarea  rows="5" cols="50" name="reason" style="margin-top: 8px;margin-left: -150px"></textarea> </div>
     </div><br>
           <br>

            <div class="row">
     <div class="col"><h5 style=";width: 140px;margin-left: 15px;margin-top: 8px">Previous Status</h5></div>
    <div class="col"><h5 style="width: 120px;margin-left: -150px;margin-top: 8px">{{ dt.status }}</h5> </div>
     </div><br>
           <br>


            <button type="submit" class="btn Search" style="margin-right: 8%">Submit</button>

{% endfor %}
</form>
        </div>

        <!-- Modal footer
       <button type="button" class="btn Search" style="margin-left: 640px">Ok</button>-->

      </div>
    </div>
  </div>
{% endfor %}
  <!-----------------mymodal 1----------------->
{% for t in emp %}
  <div class="modal fade" id="myModal1{{ t.id }}">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <div class="col">  <h3 style="font-size: 24px;color: #53d4af">{{ t.taskname}}</h3>
    </div>

         <button type="button" class="close" data-dismiss="modal" style="height: 2px;margin-right: -11px">&times;</button>
        </div>
        <div class="modal-body" >

    <!--<div class="col">
      <hr style="height:0.5px;border-width:0;color:gray;background-color:gray;width: 100%;margin-left: 0%;margin-top: 0%">
   </div>--><br>
            <form action="TLMyprojectsubtaskProjectstatus" method="post">
        {% csrf_token %}
        <input type="hidden"  name="team_id" value={{ t.id }}>
   <div class="row">
     <div class="col"><h5 style="width: 100px;margin-left: 20px">Start date</h5></div>
    <div class="col"><h5 style="width: 100px">{{ t.startdate}}</h5></div>
    <div class="col"><h5 style="width: 100px;margin-left: 90px">End date</h5></div>
   <div class="col"> <h5 style="width: 100px">{{ t.duedate}}</h5></div>
  </div><br><br><br>
  <div class="row">
     <div class="col"><h5 style=";width: 90px;margin-left: 20px">Assigned to</h5></div>
    <div class="col"><h5 style="width: 180px;margin-left: 0px">{{ t.assignedto.name }} </h5></div>
    <div class="col"><h5 style="width: 70px;margin-left: 70px">Progress</h5></div>
   <div class="col">
     <div class="progress" style="height:20px;background-color: #C2F0EB">
    <div class="progress-bar" style="width:{{ t.progress }}%;height:20px">{{ t.progress }}%</div>
  </div>
</div>
  <br>
  </div><br><br>
  <div class="row">
     <div class="col"> <h5 style="margin-left: 20px;width: 90px"> Status</h5></div>
  <div class="col">
         <select id="statusid" name="status" class="drop" style="margin-left: -20px;width: 120px" required>
              <option value="" selected="selected">Not selected</option>
                <option value="Inprogress" class="1">In progress</option>
                <option value="pending" class="2">pending</option>
              <option value="completed" class="3">completed</option>
      </select></div>
      <div class="col"><h5 style=";width: 140px;margin-left: 160px">Current status</h5></div>
    <div class="col"><h5 style="width: 100px;margin-left: 0px">{{ t.prostatus }} </h5></div>
               </div><br><br>
     <div class="row">
     <div class="col"><h5 style=";width: 140px;margin-left: 15px;margin-top: 8px">Progress:</h5></div>
    <div class="col"><input type="text" name="progre" style="width: 120px;margin-left: -70%;margin-top: 8px"></div>
     </div>
     <button type="submit" class="btn Search" style="margin-right: 8%">start work</button>
 </form>
  </div>

   <div class="col">
      <hr style="height:0.5px;border-width:0;color:gray;background-color:gray;width: 100%;margin-left: 0%;margin-top: 0%">
   </div>
   <div class="col">  <h4 style="margin-left: 10px;color: #53d4af;font-size: 18px">Project description</h4></div>
    <div class="col"> <a style="height: 40px;margin-top: 10px;width: 300px;margin-left: 10px;font-size: 16px">{{ t.taskdescri }}</a>
  </div><br><br>

    <div class="col">
      <hr style="height:0.5px;border-width:0;color:gray;background-color:gray;width: 100%;margin-left: 0%;margin-top: 0%">
   </div>
   <div class="col">  <h4 style="margin-left: 10px;color: #53d4af;font-size: 18px">Attached files</h4></div>
  <div class="row">
       {% for ss in t.json_taskattachfile %}
            <a href="{{ss}}" style="font-size: 17px;margin-left: 8%">Download</a>
            {% endfor %}
   </div>
    <div class="col">
      <hr style="height:0.5px;border-width:0;color:gray;background-color:gray;width: 100%;margin-left: 0%;margin-top: 1%">
   </div>
        <!-- Modal footer -->
        </div>
      </div>
    </div>


{% endfor %}


</div>
</div>
</div>
</body>
</html>
